watch_file flake.nix
watch_file flake.lock
mkdir -p "$(direnv_layout_dir)"
eval "$(nix print-dev-env --profile "$(direnv_layout_dir)/flake-profile")"

export BITTE_CLUSTER=mantis-testnet
export AWS_PROFILE=mantis
export AWS_DEFAULT_REGION=eu-central-1

domain="$(nix eval ".#clusters.$BITTE_CLUSTER.proto.config.cluster.domain" --raw)"
export VAULT_ADDR="https://vault.$domain"
export NOMAD_ADDR="https://nomad.$domain"
export CONSUL_HTTP_ADDR="https://consul.$domain"
export NIX_USER_CONF_FILES=$PWD/nix.conf:NIX_USER_CONF_FILES
